---
layout: page
current: airportdistances
title: Airport Distances
navigation: true
logo: 'assets/images/wamd11cruisesunset.png'
class: page-template
subclass: 'post page'
sitemap:
lastmod: 2020-11-29T12:49:30-05:00
changefreq: weekly
priority: 1
---

<!DOCTYPE html>
<html>

<head>
    <title>Airport Distance Calculator</title>
    <style>
        textarea:focus,
        input:focus {
            color: #000000;
        }

        input,
        select,
        textarea {
            color: #000;
        }
    </style>
</head>

<body>

    <center>

        Calculate distance between two airports by ICAO code, in nautical miles.

        <br>
        <br>

        <form>
            <label>Airport $1$:</label>
            <input type="text" id="airport-1" placeholder="Enter ICAO code" size="10">
            <label>Airport $2$:</label>
            <input type="text" id="airport-2" placeholder="Enter ICAO code" size="10">
        </form>

        <!-- <button onclick="getDistance()">Calculate Distance</button> -->

        <br>

        <input type="submit" value="Calculate" onclick="getDistance()">
        <input type="submit" value="Reset" onclick="resetFields()">

        <br>
        <br>

        <p id="distance-output"></p>

    </center>



    <script>
        const earthRadius = 6371.0; // radius of the Earth in kilometers

        let airports = {};

        //reads the csv file
        var rawFile = new XMLHttpRequest();
        rawFile.open("GET", "AirportICAOLatLong.csv", false);
        rawFile.onreadystatechange = function () {
            if (rawFile.readyState === 4) {
                if (rawFile.status === 200 || rawFile.status == 0) {
                    var allText = rawFile.responseText;
                    var lines = allText.split("\n");
                    for (var i = 0; i < lines.length; i++) {
                        var data = lines[i].split(",");
                        airports[data[0]] = { lat: parseFloat(data[1]), lon: parseFloat(data[2]) };
                    }
                }
            }
        }
        rawFile.send(null);

        function resetFields() {
            document.getElementById("airport-1").value = "";
            document.getElementById("airport-2").value = "";
            document.getElementById("distance-output").innerHTML = "";
        }

        function getDistance() {
            let airport1ICAO = document.getElementById("airport-1").value.toUpperCase();
            let airport2ICAO = document.getElementById("airport-2").value.toUpperCase();


            let airport1Lat = airports[airport1ICAO].lat;
            let airport1Lon = airports[airport1ICAO].lon;
            let airport2Lat = airports[airport2ICAO].lat;
            let airport2Lon = airports[airport2ICAO].lon;

            airport1Lat = airport1Lat * (Math.PI / 180);
            airport1Lon = airport1Lon * (Math.PI / 180);
            airport2Lat = airport2Lat * (Math.PI / 180);
            airport2Lon = airport2Lon * (Math.PI / 180);

            let distance = (earthRadius * Math.acos(Math.sin(airport1Lat) * Math.sin(airport2Lat) +
                Math.cos(airport1Lat) * Math.cos(airport2Lat) *
                Math.cos(airport1Lon - airport2Lon))) * 0.539957;

            distance = Math.round(distance * 100) / 100;

            document.getElementById("distance-output").innerHTML = distance + " nm";

        }
    </script>

</body>

</html>